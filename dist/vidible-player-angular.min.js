!function(e){"use strict";var i=e.module("ngLoadScript",[]);i.directive("script",function(){return{restrict:"E",scope:!1,link:function(e,i,t){if("text/javascript-lazy"===t.type){var n=document.createElement("script");n.type="text/javascript";var r=i.attr("src");if(void 0!==r)n.src=r;else{var a=i.text();n.text=a}document.head.appendChild(n),i.remove()}}}})}(angular),function(e){"use strict";var i=e.module("vidible-module",["ngLoadScript"]);i.directive("vidiblePlayer",["$timeout",function(e){function i(e){switch(e){case vidible.PLAYER_READY:return n+"ready";case vidible.VIDEO_END:return n+"end";case vidible.VIDEO_PAUSE:return n+"pause";case vidible.VIDEO_PLAY:return n+"play"}}var t=1,n="vidible.player.";return{restrict:"E",replace:!0,template:'<div class="player vdb_player vdb_55c8aae9e4b0ca68372fb55355af9dcae4b02944c03a2eee"></div>',scope:{videoId:"@videoId"},link:function(n,r,a){function c(){var e=Array.prototype.slice.call(arguments);n.$apply(function(){n.$emit.apply(n,e)})}function d(e){[vidible.PLAYER_READY,vidible.VIDEO_END,vidible.VIDEO_PAUSE,vidible.VIDEO_PLAY].forEach(function(t){e.addEventListener(t,function(e){c(i(t),n.player,e)})})}function l(i,t){i.vdb_Player?t(i.vdb_Player):e(function(){l(i,t)},0)}function o(){return angular.element(document.getElementById(v))}function u(i){var t=o();if(0===t.length)console.error("Couldn't find element with id = "+n.playerId+". Make sure the player directive is correctly placed in the DOM.");else{var r=angular.element('<script type="text/javascript-lazy" src="//delivery.vidible.tv/jsonp/pid=55c8aae9e4b0ca68372fb553/vid='+i+'/55af9dcae4b02944c03a2eee.js"></script>');e(function(){t.append(r),l(t[0],d)},0)}}var v=r[0].id||a.videoId||"page-unique-vidible-id-"+t++;r[0].id=v;var p=n.$watch(function(){return"undefined"!=typeof n.videoId},function(e){e&&(p(),n.$watch("videoId",function(){u(a.videoId)}))})}}}])}(angular);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFuZ3VsYXItbG9hZHNjcmlwdC5qcyIsInZpZGlibGUtcGxheWVyLmpzIl0sIm5hbWVzIjpbIm5nIiwiYXBwIiwibW9kdWxlIiwiZGlyZWN0aXZlIiwicmVzdHJpY3QiLCJzY29wZSIsImxpbmsiLCJlbGVtIiwiYXR0ciIsInR5cGUiLCJzIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic3JjIiwidW5kZWZpbmVkIiwiY29kZSIsInRleHQiLCJoZWFkIiwiYXBwZW5kQ2hpbGQiLCJyZW1vdmUiLCJhbmd1bGFyIiwiJHRpbWVvdXQiLCJnZXRWaWRpYmxlRXZlbnROYW1lIiwidmlkaWJsZUV2ZW50IiwidmlkaWJsZSIsIlBMQVlFUl9SRUFEWSIsImV2ZW50UHJlZml4IiwiVklERU9fRU5EIiwiVklERU9fUEFVU0UiLCJWSURFT19QTEFZIiwicGFnZVVuaXFlSWQiLCJyZXBsYWNlIiwidGVtcGxhdGUiLCJ2aWRlb0lkIiwiZWxlbWVudCIsImF0dHJzIiwiYXBwbHlCcm9hZGNhc3QiLCJhcmdzIiwiQXJyYXkiLCJwcm90b3R5cGUiLCJzbGljZSIsImNhbGwiLCJhcmd1bWVudHMiLCIkYXBwbHkiLCIkZW1pdCIsImFwcGx5IiwiaW5pdFBsYXllciIsInBsYXllciIsImZvckVhY2giLCJhZGRFdmVudExpc3RlbmVyIiwiZGF0YSIsIndhaXRGb3JQbGF5ZXJUb0JlUmVhZHkiLCJkaXYiLCJjYiIsInZkYl9QbGF5ZXIiLCJnZXRWaWRpYmxlRWxlbWVudCIsImdldEVsZW1lbnRCeUlkIiwicGxheWVySWQiLCJjcmVhdGVQbGF5ZXIiLCJ2aWRpYmxlRGl2IiwibGVuZ3RoIiwiY29uc29sZSIsImVycm9yIiwidmlkU2NyaXB0IiwiYXBwZW5kIiwiaWQiLCJzdG9wV2F0Y2hpbmdSZWFkeSIsIiR3YXRjaCIsInJlYWR5Il0sIm1hcHBpbmdzIjoiQ0F5QkEsU0FBQUEsR0FDQSxZQUVBLElBQUFDLEdBQUFELEVBQUFFLE9BQUEsa0JBRUFELEdBQUFFLFVBQUEsU0FBQSxXQUNBLE9BQ0FDLFNBQUEsSUFDQUMsT0FBQSxFQUNBQyxLQUFBLFNBQUFELEVBQUFFLEVBQUFDLEdBRUEsR0FBQSx5QkFBQUEsRUFBQUMsS0FDQSxDQUNBLEdBQUFDLEdBQUFDLFNBQUFDLGNBQUEsU0FDQUYsR0FBQUQsS0FBQSxpQkFDQSxJQUFBSSxHQUFBTixFQUFBQyxLQUFBLE1BQ0EsSUFBQU0sU0FBQUQsRUFFQUgsRUFBQUcsSUFBQUEsTUFHQSxDQUNBLEdBQUFFLEdBQUFSLEVBQUFTLE1BQ0FOLEdBQUFNLEtBQUFELEVBRUFKLFNBQUFNLEtBQUFDLFlBQUFSLEdBQ0FILEVBQUFZLGVBTUFDLFNDckRBLFNBQUFwQixHQUNBLFlBRUEsSUFBQUMsR0FBQUQsRUFBQUUsT0FBQSxrQkFBQSxnQkFDQUQsR0FDQUUsVUFBQSxpQkFBQSxXQUNBLFNBQUFrQixHQUlBLFFBQUFDLEdBQUFDLEdBRUEsT0FBQUEsR0FDQSxJQUFBQyxTQUFBQyxhQUNBLE1BQUFDLEdBQUEsT0FDQSxLQUFBRixTQUFBRyxVQUNBLE1BQUFELEdBQUEsS0FDQSxLQUFBRixTQUFBSSxZQUNBLE1BQUFGLEdBQUEsT0FDQSxLQUFBRixTQUFBSyxXQUNBLE1BQUFILEdBQUEsUUFiQSxHQUFBSSxHQUFBLEVBQ0FKLEVBQUEsaUJBZ0JBLFFBQ0F0QixTQUFBLElBQ0EyQixTQUFBLEVBQ0FDLFNBQUEsNkZBQ0EzQixPQUNBNEIsUUFBQSxZQUdBM0IsS0FBQSxTQUFBRCxFQUFBNkIsRUFBQUMsR0FLQSxRQUFBQyxLQUNBLEdBQUFDLEdBQUFDLE1BQUFDLFVBQUFDLE1BQUFDLEtBQUFDLFVBQ0FyQyxHQUFBc0MsT0FBQSxXQUNBdEMsRUFBQXVDLE1BQUFDLE1BQUF4QyxFQUFBZ0MsS0FRQSxRQUFBUyxHQUFBQyxJQUNBdkIsUUFBQUMsYUFDQUQsUUFBQUcsVUFDQUgsUUFBQUksWUFDQUosUUFBQUssWUFDQW1CLFFBQUEsU0FBQXpCLEdBQ0F3QixFQUFBRSxpQkFBQTFCLEVBQUEsU0FBQTJCLEdBQ0FkLEVBQUFkLEVBQUFDLEdBQUFsQixFQUFBMEMsT0FBQUcsT0FNQSxRQUFBQyxHQUFBQyxFQUFBQyxHQUNBRCxFQUFBRSxXQUNBRCxFQUFBRCxFQUFBRSxZQUVBakMsRUFBQSxXQUFBOEIsRUFBQUMsRUFBQUMsSUFBQSxHQUlBLFFBQUFFLEtBQ0EsTUFBQW5DLFNBQUFjLFFBQUF2QixTQUFBNkMsZUFBQUMsSUFHQSxRQUFBQyxHQUFBekIsR0FLQSxHQUFBMEIsR0FBQUosR0FDQSxJQUFBLElBQUFJLEVBQUFDLE9BQ0FDLFFBQUFDLE1BQUEsbUNBQUF6RCxFQUFBb0QsU0FBQSx3RUFDQSxDQUVBLEdBQUFNLEdBQUEzQyxRQUFBYyxRQUFBLHlHQUNBRCxFQUFBLDBDQUVBWixHQUFBLFdBQ0FzQyxFQUFBSyxPQUFBRCxHQUdBWixFQUFBUSxFQUFBLEdBQUFiLElBQ0EsSUF6REEsR0FBQVcsR0FBQXZCLEVBQUEsR0FBQStCLElBQUE5QixFQUFBRixTQUFBLDBCQUFBSCxHQUNBSSxHQUFBLEdBQUErQixHQUFBUixDQXdFQSxJQUFBUyxHQUFBN0QsRUFBQThELE9BQ0EsV0FFQSxNQUFBLG1CQUFBOUQsR0FBQTRCLFNBRUEsU0FBQW1DLEdBQ0FBLElBQ0FGLElBRUE3RCxFQUFBOEQsT0FBQSxVQUFBLFdBRUFULEVBQUF2QixFQUFBRixvQkFZQWIiLCJmaWxlIjoidmlkaWJsZS1wbGF5ZXItYW5ndWxhci5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogIEFuZ3VsYXIgTG9hZFNjcmlwdFxuICpcbiAqICBMZXQgYW5ndWxhciBsb2FkIGFuZCBleGVjdXRlIGxhenkgamF2YXNjcmlwdCBmcm9tIHBhcnRpYWxzIVxuICpcbiAqICBUaGlzIG1vZHVsZSBpcyB0aGUgcmVzdWx0IG9mICB0aGlzIGlzc3VlOiBcIjEuMi4wcmMxIHJlZ3Jlc3Npb246IHNjcmlwdCB0YWdzIG5vdCBsb2FkZWQgdmlhIG5nSW5jbHVkZVwiXG4gKiAgSXNzdWUgdXJsOiBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyLmpzL2lzc3Vlcy8zNzU2XG4gKlxuICogIEFzIG9mIEFuZ3VsYXIgMS4yLjAgdGhlIG5nSW5jbHVkZSBzY3JpcHRzIGRvZXMgbm90IHBlcm1pdCBleGVjdXRpb24gb2YgamF2YXNjcmlwdCBmcm9tIGluY2x1ZGVkIHBhcnRpYWxzLlxuICogIFRoaXMgbGl0dGxlIG1vZHVsZSBleGVjdXRlIGNvZGUgaW5zaWRlIHNjcmlwdCB0YWdzIHdpdGggXCJqYXZhc2NyaXB0LWxhenlcIiBhdHRyaWJ1dGUgYWZ0ZXIgcGFydGlhbCBsb2FkaW5nLFxuICogIHRodXMgcmUtZW5hYmxpbmcgdGhpcyBmZWF0dXJlLlxuICpcbiAqICAoIHBsZWFzZSBoYXZlIGEgbG9vayBhdCB0aGUgaXNzdWUgY29tbWVudHMsIHRoaXMgYW5ndWxhciBmZWF0dXJlIHdhcyBuZXZlciBwbGFubmVkIG5vciBpbmNsdWRlZCBwcm9wZXJseSxcbiAqICB3YXMgb25seSBhIGRyYXdiYWNrIG9mIHVzaW5nIGpRdWVyeSBmb3IgcGFydGlhbCBpbmNsdXNpb24gKVxuICpcbiAqICBUaGlzIGFuZ3VsYXIgbW9kdWxlIGhhdmUgYmVlbiBjcmVhdGVkIGJ5IEBlbmRvcmFtYSAoaHR0cHM6Ly9naXRodWIuY29tL2VuZG9yYW1hKSBiYXNlZCB1cG9uIHRoZSBjb2RlXG4gKiAgcG9zdGVkIGJ5IEBvbG9zdGFuIChodHRwczovL2dpdGh1Yi5jb20vb2xvc3RhbilcbiAqXG4gKiAgU2ltcGx5IGFkZCB0aGlzIGZpbGUsIGxvYWQgbmdMb2FkU2NyaXB0IG1vZHVsZSBhcyBhcHBsaWNhdGlvbiBkZXBlbmRlbmN5IGFuZCB1c2UgdHlwZT1cInRleHQvamF2YXNjcmlwdC1sYXp5XCJcbiAqICBhcyB0eXBlIGZvciBzY3JpcHQgeW91IHdoaWNoIHRvIGxvYWQgbGF6aWx5IGluIHBhcnRpYWxzLlxuICpcbiAqIExpY2Vuc2U6IDIwMTMgLSByZWxlYXNlZCB0byB0aGUgUHVibGljIERvbWFpbi5cbiAqL1xuXG4vKmdsb2JhbCBhbmd1bGFyICovXG4oZnVuY3Rpb24gKG5nKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGFwcCA9IG5nLm1vZHVsZSgnbmdMb2FkU2NyaXB0JywgW10pO1xuXG4gICAgYXBwLmRpcmVjdGl2ZSgnc2NyaXB0JywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICAgICAgc2NvcGU6IGZhbHNlLFxuICAgICAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW0sIGF0dHIpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWYgKGF0dHIudHlwZT09PSd0ZXh0L2phdmFzY3JpcHQtbGF6eScpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7XG4gICAgICAgICAgICAgICAgICAgIHMudHlwZSA9IFwidGV4dC9qYXZhc2NyaXB0XCI7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzcmMgPSBlbGVtLmF0dHIoJ3NyYycpO1xuICAgICAgICAgICAgICAgICAgICBpZihzcmMhPT11bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHMuc3JjID0gc3JjO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvZGUgPSBlbGVtLnRleHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHMudGV4dCA9IGNvZGU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzKTtcbiAgICAgICAgICAgICAgICAgICAgZWxlbS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfSk7XG5cbn0oYW5ndWxhcikpOyIsIi8qKlxuICogQ3JlYXRlZCBieSB0b21lcnNlbGEgb24gOC8xMy8xNS5cbiAqL1xuXG4oZnVuY3Rpb24gKG5nKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGFwcCA9IG5nLm1vZHVsZSgndmlkaWJsZS1tb2R1bGUnLCBbJ25nTG9hZFNjcmlwdCddKTtcbiAgICBhcHBcbiAgICAgICAgLmRpcmVjdGl2ZSgndmlkaWJsZVBsYXllcicsIFsnJHRpbWVvdXQnLFxuICAgICAgICAgICAgZnVuY3Rpb24gKCR0aW1lb3V0KSB7XG4gICAgICAgICAgICAgICAgdmFyIHBhZ2VVbmlxZUlkID0gMTtcbiAgICAgICAgICAgICAgICB2YXIgZXZlbnRQcmVmaXggPSAndmlkaWJsZS5wbGF5ZXIuJztcblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGdldFZpZGlibGVFdmVudE5hbWUodmlkaWJsZUV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIENhbiB1c2UgdGhpcyBmdW5jdGlvbiBvbmx5IHdoZW4gYSB2aWRpYmxlIHNjcmlwdCBpcyBsb2FkZWQgKFdoZW4gdGhlIHBsYXllciBpcyBhY3RpdmUgaW4gb3VyIGNhc2UpXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodmlkaWJsZUV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIHZpZGlibGUuUExBWUVSX1JFQURZOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBldmVudFByZWZpeCArICdyZWFkeSc7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIHZpZGlibGUuVklERU9fRU5EOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBldmVudFByZWZpeCArICdlbmQnO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSB2aWRpYmxlLlZJREVPX1BBVVNFOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBldmVudFByZWZpeCArICdwYXVzZSc7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIHZpZGlibGUuVklERU9fUExBWTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXZlbnRQcmVmaXggKyAncGxheSc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICAgICAgICAgICAgICByZXBsYWNlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJzxkaXYgY2xhc3M9XCJwbGF5ZXIgdmRiX3BsYXllciB2ZGJfNTVjOGFhZTllNGIwY2E2ODM3MmZiNTUzNTVhZjlkY2FlNGIwMjk0NGMwM2EyZWVlXCI+PC9kaXY+JyxcbiAgICAgICAgICAgICAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZGVvSWQ6ICdAdmlkZW9JZCdcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vcGxheWVySWQ6ICdAcGxheWVySWQnXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0IGVsZW1lbnRJZCBpZiBub3QgYWxyZWFkeSBkZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGxheWVySWQgPSBlbGVtZW50WzBdLmlkIHx8IGF0dHJzLnZpZGVvSWQgfHwgJ3BhZ2UtdW5pcXVlLXZpZGlibGUtaWQtJyArIHBhZ2VVbmlxZUlkKys7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50WzBdLmlkID0gcGxheWVySWQ7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGFwcGx5QnJvYWRjYXN0ICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUuJGVtaXQuYXBwbHkoc2NvcGUsIGFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBvblBsYXllckVycm9yKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwbHlCcm9hZGNhc3QoZXZlbnRQcmVmaXggKyAnZXJyb3InLCBzY29wZS5wbGF5ZXIsIGV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gaW5pdFBsYXllcihwbGF5ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbdmlkaWJsZS5QTEFZRVJfUkVBRFksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZGlibGUuVklERU9fRU5ELFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWRpYmxlLlZJREVPX1BBVVNFLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWRpYmxlLlZJREVPX1BMQVldXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb3JFYWNoKGZ1bmN0aW9uKHZpZGlibGVFdmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyLmFkZEV2ZW50TGlzdGVuZXIodmlkaWJsZUV2ZW50LCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwbHlCcm9hZGNhc3QoZ2V0VmlkaWJsZUV2ZW50TmFtZSh2aWRpYmxlRXZlbnQpLCBzY29wZS5wbGF5ZXIsIGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHdhaXRGb3JQbGF5ZXJUb0JlUmVhZHkoZGl2LCBjYikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkaXYudmRiX1BsYXllcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYihkaXYudmRiX1BsYXllcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7IHdhaXRGb3JQbGF5ZXJUb0JlUmVhZHkoZGl2LGNiKTsgfSwgMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBnZXRWaWRpYmxlRWxlbWVudCgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYW5ndWxhci5lbGVtZW50KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHBsYXllcklkKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGNyZWF0ZVBsYXllcih2aWRlb0lkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVzdHJveSBwbGF5ZXIgaWYgZXhpc3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2Rlc3Ryb3lQbGF5ZXIoKTtcblxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZpZGlibGVEaXYgPSBnZXRWaWRpYmxlRWxlbWVudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2aWRpYmxlRGl2Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdDb3VsZG5cXCd0IGZpbmQgZWxlbWVudCB3aXRoIGlkID0gJyArIHNjb3BlLnBsYXllcklkICsgJy4gTWFrZSBzdXJlIHRoZSBwbGF5ZXIgZGlyZWN0aXZlIGlzIGNvcnJlY3RseSBwbGFjZWQgaW4gdGhlIERPTS4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBMb2FkIHRoZSBWaWRpYmxlIHNjcmlwdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmlkU2NyaXB0ID0gYW5ndWxhci5lbGVtZW50KCc8c2NyaXB0IHR5cGU9XCJ0ZXh0L2phdmFzY3JpcHQtbGF6eVwiIHNyYz1cIi8vZGVsaXZlcnkudmlkaWJsZS50di9qc29ucC9waWQ9NTVjOGFhZTllNGIwY2E2ODM3MmZiNTUzL3ZpZD0nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZGVvSWQgKyAnLzU1YWY5ZGNhZTRiMDI5NDRjMDNhMmVlZS5qc1wiPjwvc2NyaXB0PicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDcmVhdGUgbmV3IFZpZGlibGUgZWxlbWVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZGlibGVEaXYuYXBwZW5kKHZpZFNjcmlwdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3ZhciB2aWRpYmxlRWxlbWVudCA9IGFuZ3VsYXIuZWxlbWVudChlbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdmlkaWJsZUVsZW1lbnQuYXBwZW5kKHZpZFNjcmlwdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0Rm9yUGxheWVyVG9CZVJlYWR5KHZpZGlibGVEaXZbMF0sIGluaXRQbGF5ZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRlc3Ryb3lQbGF5ZXIoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNjb3BlLnBsYXllcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29wZS5wbGF5ZXIuZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2aWRpYmxlRGl2ID0gZ2V0VmlkaWJsZUVsZW1lbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmlkaWJsZURpdi5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCh2aWRpYmxlRGl2KS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIExvYWQgcGxheWVyIHdoZW4gdGhlIGRpcmVjdGl2ZSB0YWcgaXMgcmVhZHlcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdG9wV2F0Y2hpbmdSZWFkeSA9IHNjb3BlLiR3YXRjaChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdhaXQgdW50aWwgdmlkZW9JZCBpcyBkZWZpbmVkLi4uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAodHlwZW9mIHNjb3BlLnZpZGVvSWQgIT09ICd1bmRlZmluZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChyZWFkeSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVhZHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0b3BXYXRjaGluZ1JlYWR5KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLiR3YXRjaCgndmlkZW9JZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3Njb3BlLnZpZGVvSWQgPSBhdHRycy52aWRlb0lkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZVBsYXllcihhdHRycy52aWRlb0lkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgIHNjb3BlLnBsYXllciAmJiBzY29wZS5wbGF5ZXIuZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy99KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIF0pXG59KShhbmd1bGFyKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==