!function(e){"use strict";var i=e.module("ngLoadScript",[]);i.directive("script",function(){return{restrict:"E",scope:!1,link:function(e,i,t){if("text/javascript-lazy"===t.type){var a=document.createElement("script");a.type="text/javascript";var n=i.attr("src");if(void 0!==n)a.src=n;else{var r=i.text();a.text=r}document.head.appendChild(a),i.remove()}}}})}(angular),function(e){"use strict";var i=e.module("vidible-module",["ngLoadScript"]);i.directive("vidiblePlayer",["$timeout",function(e){function i(e){switch(e){case vidible.PLAYER_READY:return a+"ready";case vidible.VIDEO_END:return a+"end";case vidible.VIDEO_PAUSE:return a+"pause";case vidible.VIDEO_PLAY:return a+"play"}}var t=1,a="vidible.player.";return{restrict:"EA",scope:{videoId:"=videoId",playerId:"@playerId"},link:function(a,n,r){function c(){var e=Array.prototype.slice.call(arguments);a.$apply(function(){a.$emit.apply(a,e)})}function d(e){[vidible.PLAYER_READY,vidible.VIDEO_END,vidible.VIDEO_PAUSE,vidible.VIDEO_PLAY].forEach(function(t){e.addEventListener(t,function(a){c(i(t),e,a)})})}function l(i,t){i.vdb_Player?t(i.vdb_Player):e(function(){l(i,t)},0)}function o(i){u();var t=angular.element('<div class="player vdb_player vdb_55c8aae9e4b0ca68372fb55355af9dcae4b02944c03a2eee"></div>'),a=angular.element('<script type="text/javascript-lazy" src="//delivery.vidible.tv/jsonp/pid=55c8aae9e4b0ca68372fb553/vid='+i+'/55af9dcae4b02944c03a2eee.js"></script>');t.append(a),e(function(){n.append(t),l(t[0],d)},0)}function u(){a.player&&a.player.destroy(),n.empty()}var v=n[0].id||r.playerId||"page-unique-vidible-id-"+t++;n[0].id=v;var p=a.$watch(function(){return"undefined"!=typeof a.videoId},function(e){e&&(p(),a.$watch("videoId",function(){o(a.videoId)}))});a.$on("$destroy",function(){u()})}}}])}(angular);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFuZ3VsYXItbG9hZHNjcmlwdC5qcyIsInZpZGlibGUtcGxheWVyLmpzIl0sIm5hbWVzIjpbIm5nIiwiYXBwIiwibW9kdWxlIiwiZGlyZWN0aXZlIiwicmVzdHJpY3QiLCJzY29wZSIsImxpbmsiLCJlbGVtIiwiYXR0ciIsInR5cGUiLCJzIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic3JjIiwidW5kZWZpbmVkIiwiY29kZSIsInRleHQiLCJoZWFkIiwiYXBwZW5kQ2hpbGQiLCJyZW1vdmUiLCJhbmd1bGFyIiwiJHRpbWVvdXQiLCJnZXRWaWRpYmxlRXZlbnROYW1lIiwidmlkaWJsZUV2ZW50IiwidmlkaWJsZSIsIlBMQVlFUl9SRUFEWSIsImV2ZW50UHJlZml4IiwiVklERU9fRU5EIiwiVklERU9fUEFVU0UiLCJWSURFT19QTEFZIiwicGFnZVVuaXFlSWQiLCJ2aWRlb0lkIiwicGxheWVySWQiLCJlbGVtZW50IiwiYXR0cnMiLCJhcHBseUJyb2FkY2FzdCIsImFyZ3MiLCJBcnJheSIsInByb3RvdHlwZSIsInNsaWNlIiwiY2FsbCIsImFyZ3VtZW50cyIsIiRhcHBseSIsIiRlbWl0IiwiYXBwbHkiLCJpbml0UGxheWVyIiwicGxheWVyIiwiZm9yRWFjaCIsImFkZEV2ZW50TGlzdGVuZXIiLCJkYXRhIiwid2FpdEZvclBsYXllclRvQmVSZWFkeSIsImRpdiIsImNiIiwidmRiX1BsYXllciIsImNyZWF0ZVBsYXllciIsImRlc3Ryb3lQbGF5ZXIiLCJ2aWRpYmxlRWxlbWVudCIsInZpZFNjcmlwdCIsImFwcGVuZCIsImRlc3Ryb3kiLCJlbXB0eSIsImlkIiwic3RvcFdhdGNoaW5nUmVhZHkiLCIkd2F0Y2giLCJyZWFkeSIsIiRvbiJdLCJtYXBwaW5ncyI6IkNBeUJBLFNBQUFBLEdBQ0EsWUFFQSxJQUFBQyxHQUFBRCxFQUFBRSxPQUFBLGtCQUVBRCxHQUFBRSxVQUFBLFNBQUEsV0FDQSxPQUNBQyxTQUFBLElBQ0FDLE9BQUEsRUFDQUMsS0FBQSxTQUFBRCxFQUFBRSxFQUFBQyxHQUVBLEdBQUEseUJBQUFBLEVBQUFDLEtBQ0EsQ0FDQSxHQUFBQyxHQUFBQyxTQUFBQyxjQUFBLFNBQ0FGLEdBQUFELEtBQUEsaUJBQ0EsSUFBQUksR0FBQU4sRUFBQUMsS0FBQSxNQUNBLElBQUFNLFNBQUFELEVBRUFILEVBQUFHLElBQUFBLE1BR0EsQ0FDQSxHQUFBRSxHQUFBUixFQUFBUyxNQUNBTixHQUFBTSxLQUFBRCxFQUVBSixTQUFBTSxLQUFBQyxZQUFBUixHQUNBSCxFQUFBWSxlQU1BQyxTQ3JEQSxTQUFBcEIsR0FDQSxZQUVBLElBQUFDLEdBQUFELEVBQUFFLE9BQUEsa0JBQUEsZ0JBQ0FELEdBQ0FFLFVBQUEsaUJBQUEsV0FDQSxTQUFBa0IsR0FJQSxRQUFBQyxHQUFBQyxHQUVBLE9BQUFBLEdBQ0EsSUFBQUMsU0FBQUMsYUFDQSxNQUFBQyxHQUFBLE9BQ0EsS0FBQUYsU0FBQUcsVUFDQSxNQUFBRCxHQUFBLEtBQ0EsS0FBQUYsU0FBQUksWUFDQSxNQUFBRixHQUFBLE9BQ0EsS0FBQUYsU0FBQUssV0FDQSxNQUFBSCxHQUFBLFFBYkEsR0FBQUksR0FBQSxFQUNBSixFQUFBLGlCQWdCQSxRQUNBdEIsU0FBQSxLQUNBQyxPQUNBMEIsUUFBQSxXQUNBQyxTQUFBLGFBRUExQixLQUFBLFNBQUFELEVBQUE0QixFQUFBQyxHQUtBLFFBQUFDLEtBQ0EsR0FBQUMsR0FBQUMsTUFBQUMsVUFBQUMsTUFBQUMsS0FBQUMsVUFDQXBDLEdBQUFxQyxPQUFBLFdBQ0FyQyxFQUFBc0MsTUFBQUMsTUFBQXZDLEVBQUErQixLQVFBLFFBQUFTLEdBQUFDLElBQ0F0QixRQUFBQyxhQUNBRCxRQUFBRyxVQUNBSCxRQUFBSSxZQUNBSixRQUFBSyxZQUNBa0IsUUFBQSxTQUFBeEIsR0FDQXVCLEVBQUFFLGlCQUFBekIsRUFBQSxTQUFBMEIsR0FDQWQsRUFBQWIsRUFBQUMsR0FBQXVCLEVBQUFHLE9BS0EsUUFBQUMsR0FBQUMsRUFBQUMsR0FDQUQsRUFBQUUsV0FDQUQsRUFBQUQsRUFBQUUsWUFFQWhDLEVBQUEsV0FBQTZCLEVBQUFDLEVBQUFDLElBQUEsR0FRQSxRQUFBRSxHQUFBdkIsR0FFQXdCLEdBRUEsSUFBQUMsR0FBQXBDLFFBQUFhLFFBQUEsOEZBRUF3QixFQUFBckMsUUFBQWEsUUFBQSx5R0FDQUYsRUFBQSwwQ0FDQXlCLEdBQUFFLE9BQUFELEdBR0FwQyxFQUFBLFdBQ0FZLEVBQUF5QixPQUFBRixHQUNBTixFQUFBTSxFQUFBLEdBQUFYLElBQ0EsR0FHQSxRQUFBVSxLQUNBbEQsRUFBQXlDLFFBQUF6QyxFQUFBeUMsT0FBQWEsVUFDQTFCLEVBQUEyQixRQXpEQSxHQUFBNUIsR0FBQUMsRUFBQSxHQUFBNEIsSUFBQTNCLEVBQUFGLFVBQUEsMEJBQUFGLEdBQ0FHLEdBQUEsR0FBQTRCLEdBQUE3QixDQTREQSxJQUFBOEIsR0FBQXpELEVBQUEwRCxPQUNBLFdBRUEsTUFBQSxtQkFBQTFELEdBQUEwQixTQUVBLFNBQUFpQyxHQUNBQSxJQUNBRixJQUNBekQsRUFBQTBELE9BQUEsVUFBQSxXQUNBVCxFQUFBakQsRUFBQTBCLGFBVUExQixHQUFBNEQsSUFBQSxXQUFBLFdBQ0FWLFlBTUFuQyIsImZpbGUiOiJ2aWRpYmxlLXBsYXllci1hbmd1bGFyLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiAgQW5ndWxhciBMb2FkU2NyaXB0XG4gKlxuICogIExldCBhbmd1bGFyIGxvYWQgYW5kIGV4ZWN1dGUgbGF6eSBqYXZhc2NyaXB0IGZyb20gcGFydGlhbHMhXG4gKlxuICogIFRoaXMgbW9kdWxlIGlzIHRoZSByZXN1bHQgb2YgIHRoaXMgaXNzdWU6IFwiMS4yLjByYzEgcmVncmVzc2lvbjogc2NyaXB0IHRhZ3Mgbm90IGxvYWRlZCB2aWEgbmdJbmNsdWRlXCJcbiAqICBJc3N1ZSB1cmw6IGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL2FuZ3VsYXIuanMvaXNzdWVzLzM3NTZcbiAqXG4gKiAgQXMgb2YgQW5ndWxhciAxLjIuMCB0aGUgbmdJbmNsdWRlIHNjcmlwdHMgZG9lcyBub3QgcGVybWl0IGV4ZWN1dGlvbiBvZiBqYXZhc2NyaXB0IGZyb20gaW5jbHVkZWQgcGFydGlhbHMuXG4gKiAgVGhpcyBsaXR0bGUgbW9kdWxlIGV4ZWN1dGUgY29kZSBpbnNpZGUgc2NyaXB0IHRhZ3Mgd2l0aCBcImphdmFzY3JpcHQtbGF6eVwiIGF0dHJpYnV0ZSBhZnRlciBwYXJ0aWFsIGxvYWRpbmcsXG4gKiAgdGh1cyByZS1lbmFibGluZyB0aGlzIGZlYXR1cmUuXG4gKlxuICogICggcGxlYXNlIGhhdmUgYSBsb29rIGF0IHRoZSBpc3N1ZSBjb21tZW50cywgdGhpcyBhbmd1bGFyIGZlYXR1cmUgd2FzIG5ldmVyIHBsYW5uZWQgbm9yIGluY2x1ZGVkIHByb3Blcmx5LFxuICogIHdhcyBvbmx5IGEgZHJhd2JhY2sgb2YgdXNpbmcgalF1ZXJ5IGZvciBwYXJ0aWFsIGluY2x1c2lvbiApXG4gKlxuICogIFRoaXMgYW5ndWxhciBtb2R1bGUgaGF2ZSBiZWVuIGNyZWF0ZWQgYnkgQGVuZG9yYW1hIChodHRwczovL2dpdGh1Yi5jb20vZW5kb3JhbWEpIGJhc2VkIHVwb24gdGhlIGNvZGVcbiAqICBwb3N0ZWQgYnkgQG9sb3N0YW4gKGh0dHBzOi8vZ2l0aHViLmNvbS9vbG9zdGFuKVxuICpcbiAqICBTaW1wbHkgYWRkIHRoaXMgZmlsZSwgbG9hZCBuZ0xvYWRTY3JpcHQgbW9kdWxlIGFzIGFwcGxpY2F0aW9uIGRlcGVuZGVuY3kgYW5kIHVzZSB0eXBlPVwidGV4dC9qYXZhc2NyaXB0LWxhenlcIlxuICogIGFzIHR5cGUgZm9yIHNjcmlwdCB5b3Ugd2hpY2ggdG8gbG9hZCBsYXppbHkgaW4gcGFydGlhbHMuXG4gKlxuICogTGljZW5zZTogMjAxMyAtIHJlbGVhc2VkIHRvIHRoZSBQdWJsaWMgRG9tYWluLlxuICovXG5cbi8qZ2xvYmFsIGFuZ3VsYXIgKi9cbihmdW5jdGlvbiAobmcpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgYXBwID0gbmcubW9kdWxlKCduZ0xvYWRTY3JpcHQnLCBbXSk7XG5cbiAgICBhcHAuZGlyZWN0aXZlKCdzY3JpcHQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgICAgICBzY29wZTogZmFsc2UsXG4gICAgICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbSwgYXR0cilcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpZiAoYXR0ci50eXBlPT09J3RleHQvamF2YXNjcmlwdC1sYXp5JylcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcbiAgICAgICAgICAgICAgICAgICAgcy50eXBlID0gXCJ0ZXh0L2phdmFzY3JpcHRcIjtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNyYyA9IGVsZW0uYXR0cignc3JjJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmKHNyYyE9PXVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgcy5zcmMgPSBzcmM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29kZSA9IGVsZW0udGV4dCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcy50ZXh0ID0gY29kZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHMpO1xuICAgICAgICAgICAgICAgICAgICBlbGVtLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9KTtcblxufShhbmd1bGFyKSk7IiwiLyoqXG4gKiBDcmVhdGVkIGJ5IHRvbWVyc2VsYSBvbiA4LzEzLzE1LlxuICovXG5cbihmdW5jdGlvbiAobmcpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgYXBwID0gbmcubW9kdWxlKCd2aWRpYmxlLW1vZHVsZScsIFsnbmdMb2FkU2NyaXB0J10pO1xuICAgIGFwcFxuICAgICAgICAuZGlyZWN0aXZlKCd2aWRpYmxlUGxheWVyJywgWyckdGltZW91dCcsXG4gICAgICAgICAgICBmdW5jdGlvbiAoJHRpbWVvdXQpIHtcbiAgICAgICAgICAgICAgICB2YXIgcGFnZVVuaXFlSWQgPSAxO1xuICAgICAgICAgICAgICAgIHZhciBldmVudFByZWZpeCA9ICd2aWRpYmxlLnBsYXllci4nO1xuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZ2V0VmlkaWJsZUV2ZW50TmFtZSh2aWRpYmxlRXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2FuIHVzZSB0aGlzIGZ1bmN0aW9uIG9ubHkgd2hlbiBhIHZpZGlibGUgc2NyaXB0IGlzIGxvYWRlZCAoV2hlbiB0aGUgcGxheWVyIGlzIGFjdGl2ZSBpbiBvdXIgY2FzZSlcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh2aWRpYmxlRXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgdmlkaWJsZS5QTEFZRVJfUkVBRFk6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGV2ZW50UHJlZml4ICsgJ3JlYWR5JztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgdmlkaWJsZS5WSURFT19FTkQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGV2ZW50UHJlZml4ICsgJ2VuZCc7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIHZpZGlibGUuVklERU9fUEFVU0U6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGV2ZW50UHJlZml4ICsgJ3BhdXNlJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgdmlkaWJsZS5WSURFT19QTEFZOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBldmVudFByZWZpeCArICdwbGF5JztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3RyaWN0OiAnRUEnLFxuICAgICAgICAgICAgICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmlkZW9JZDogJz12aWRlb0lkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllcklkOiAnQHBsYXllcklkJ1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNldCBlbGVtZW50SWQgaWYgbm90IGFscmVhZHkgZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBsYXllcklkID0gZWxlbWVudFswXS5pZCB8fCBhdHRycy5wbGF5ZXJJZCB8fCAncGFnZS11bmlxdWUtdmlkaWJsZS1pZC0nICsgcGFnZVVuaXFlSWQrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRbMF0uaWQgPSBwbGF5ZXJJZDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gYXBwbHlCcm9hZGNhc3QgKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29wZS4kZW1pdC5hcHBseShzY29wZSwgYXJncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG9uUGxheWVyRXJyb3IoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBseUJyb2FkY2FzdChldmVudFByZWZpeCArICdlcnJvcicsIHNjb3BlLnBsYXllciwgZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBpbml0UGxheWVyKHBsYXllcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFt2aWRpYmxlLlBMQVlFUl9SRUFEWSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlkaWJsZS5WSURFT19FTkQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZGlibGUuVklERU9fUEFVU0UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZGlibGUuVklERU9fUExBWV1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvckVhY2goZnVuY3Rpb24odmlkaWJsZUV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXIuYWRkRXZlbnRMaXN0ZW5lcih2aWRpYmxlRXZlbnQsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBseUJyb2FkY2FzdChnZXRWaWRpYmxlRXZlbnROYW1lKHZpZGlibGVFdmVudCksIHBsYXllciwgZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHdhaXRGb3JQbGF5ZXJUb0JlUmVhZHkoZGl2LCBjYikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkaXYudmRiX1BsYXllcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYihkaXYudmRiX1BsYXllcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7IHdhaXRGb3JQbGF5ZXJUb0JlUmVhZHkoZGl2LGNiKTsgfSwgMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBnZXRWaWRpYmxlRWxlbWVudCgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYW5ndWxhci5lbGVtZW50KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHBsYXllcklkKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGNyZWF0ZVBsYXllcih2aWRlb0lkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVzdHJveSBwbGF5ZXIgaWYgZXhpc3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXN0cm95UGxheWVyKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmlkaWJsZUVsZW1lbnQgPSBhbmd1bGFyLmVsZW1lbnQoJzxkaXYgY2xhc3M9XCJwbGF5ZXIgdmRiX3BsYXllciB2ZGJfNTVjOGFhZTllNGIwY2E2ODM3MmZiNTUzNTVhZjlkY2FlNGIwMjk0NGMwM2EyZWVlXCI+PC9kaXY+Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTG9hZCB0aGUgVmlkaWJsZSBzY3JpcHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmlkU2NyaXB0ID0gYW5ndWxhci5lbGVtZW50KCc8c2NyaXB0IHR5cGU9XCJ0ZXh0L2phdmFzY3JpcHQtbGF6eVwiIHNyYz1cIi8vZGVsaXZlcnkudmlkaWJsZS50di9qc29ucC9waWQ9NTVjOGFhZTllNGIwY2E2ODM3MmZiNTUzL3ZpZD0nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlkZW9JZCArICcvNTVhZjlkY2FlNGIwMjk0NGMwM2EyZWVlLmpzXCI+PC9zY3JpcHQ+Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlkaWJsZUVsZW1lbnQuYXBwZW5kKHZpZFNjcmlwdCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDcmVhdGUgbmV3IFZpZGlibGUgZWxlbWVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmFwcGVuZCh2aWRpYmxlRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXRGb3JQbGF5ZXJUb0JlUmVhZHkodmlkaWJsZUVsZW1lbnRbMF0sIGluaXRQbGF5ZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBkZXN0cm95UGxheWVyKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLnBsYXllciAmJiBzY29wZS5wbGF5ZXIuZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuZW1wdHkoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTG9hZCBwbGF5ZXIgd2hlbiB0aGUgZGlyZWN0aXZlIHRhZyBpcyByZWFkeVxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0b3BXYXRjaGluZ1JlYWR5ID0gc2NvcGUuJHdhdGNoKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2FpdCB1bnRpbCB2aWRlb0lkIGlzIGRlZmluZWQuLi5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICh0eXBlb2Ygc2NvcGUudmlkZW9JZCAhPT0gJ3VuZGVmaW5lZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKHJlYWR5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZWFkeSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RvcFdhdGNoaW5nUmVhZHkoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLiR3YXRjaCgndmlkZW9JZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVQbGF5ZXIoc2NvcGUudmlkZW9JZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vc2NvcGUuJHdhdGNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgcmV0dXJuIGVsZW1lbnQuYXR0cigndmlkZW8taWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vfSwgZnVuY3Rpb24gKHZpZGVvSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgIGNyZWF0ZVBsYXllcih2aWRlb0lkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXN0cm95UGxheWVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIF0pXG59KShhbmd1bGFyKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==